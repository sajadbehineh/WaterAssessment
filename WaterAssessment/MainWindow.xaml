<?xml version="1.0" encoding="utf-8" ?>
<Window
    x:Class="WaterAssessment.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="using:WaterAssessment.Helpers"
    xmlns:local="using:WaterAssessment"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:WaterAssessment.Models"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:viewModel="using:WaterAssessment.Models.ViewModel"
    xmlns:views="using:WaterAssessment.Views"
    mc:Ignorable="d">

    <Grid x:Name="RootGrid" FlowDirection="RightToLeft">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <MenuBar
            Grid.Row="0"
            FlowDirection="RightToLeft"
            Visibility="{Binding ViewModel.MenuVisibility, Mode=OneWay}">
            <MenuBarItem Title="پرونده ها" AccessKey="F">
                <MenuFlyoutItem Tag="Print" Text="چاپ">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="P" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
                <MenuFlyoutItem Tag="Exit" Text="خروج">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="E" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
            </MenuBarItem>
            <MenuBarItem Title="ابزار" AccessKey="T">
                <MenuFlyoutItem Tag="Settings" Text="تنظیمات">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="S" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
                <MenuFlyoutItem Tag="Backup" Text="پشتیبان گیری از اطلاعات">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="B" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
            </MenuBarItem>
            <MenuBarItem Title="افزونه ها" AccessKey="P">
                <MenuFlyoutItem Tag="Translation" Text="مدیریت">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="T" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
                <MenuFlyoutItem Tag="Qari" Text="مدیریت">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="Q" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
            </MenuBarItem>
            <MenuBarItem Title="راهنما" AccessKey="A">
                <MenuFlyoutItem Tag="About" Text="درباره ما">
                    <MenuFlyoutItem.KeyboardAccelerators>
                        <KeyboardAccelerator Key="A" Modifiers="Control" />
                    </MenuFlyoutItem.KeyboardAccelerators>
                </MenuFlyoutItem>
            </MenuBarItem>

        </MenuBar>
        <Grid Grid.Row="1">
            <NavigationView
                IsBackButtonVisible="Collapsed"
                IsPaneOpen="{Binding ViewModel.IsLoggedIn, Mode=OneWay}"
                IsPaneVisible="{Binding ViewModel.IsLoggedIn, Mode=OneWay}"
                IsSettingsVisible="False">
                <NavigationView.PaneFooter>
                    <NavigationViewItem
                        Content="تنظیمات"
                        Icon="Setting"
                        Tag="Settings"
                        Tapped="NavigationViewItem_OnTapped" />
                </NavigationView.PaneFooter>
                <NavigationView.MenuItems>
                    <NavigationViewItem
                        Content="فرم اندازه گیری"
                        Tag="AssessmentForm"
                        Tapped="NavigationViewItem_OnTapped">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xF0E4;" />
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem
                        Content="ثبت اطلاعات پایه"
                        Icon="Edit"
                        Visibility="{Binding ViewModel.IsAdmin, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}">
                        <NavigationViewItem.MenuItems>
                            <NavigationViewItem
                                Content="ثبت اطلاعات همکاران"
                                Tag="InsertEmployees"
                                Tapped="NavigationViewItem_OnTapped">
                                <NavigationViewItem.Icon>
                                    <FontIcon Glyph="&#xEC25;" />
                                </NavigationViewItem.Icon>
                            </NavigationViewItem>
                            <NavigationViewItem
                                Content="افزودن محل اندازه گیری"
                                Tag="Location"
                                Tapped="NavigationViewItem_OnTapped">
                                <NavigationViewItem.Icon>
                                    <FontIcon Glyph="&#xE707;" />
                                </NavigationViewItem.Icon>
                            </NavigationViewItem>
                            <NavigationViewItem
                                Content="افزودن پروانه و مولینه"
                                Tag="Propeller_CurrentMeter"
                                Tapped="NavigationViewItem_OnTapped">
                                <NavigationViewItem.Icon>
                                    <ImageIcon Width="16" Source="Assets/Icons/propeller-svgrepo-com.svg" />
                                </NavigationViewItem.Icon>
                            </NavigationViewItem>
                        </NavigationViewItem.MenuItems>
                    </NavigationViewItem>
                    <NavigationViewItem Content="گزارشات">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE9F9;" />
                        </NavigationViewItem.Icon>
                        <NavigationViewItem.MenuItems>
                            <NavigationViewItem
                                Content="اندازه گیری ها"
                                Tag="ChannelsReportPage"
                                Tapped="NavigationViewItem_OnTapped">
                                <NavigationViewItem.Icon>
                                    <FontIcon Glyph="&#xE9F9;" />
                                </NavigationViewItem.Icon>
                            </NavigationViewItem>
                        </NavigationViewItem.MenuItems>
                    </NavigationViewItem>
                    <NavigationViewItem
                        Content="مدیریت کاربران"
                        Icon="People"
                        Tag="UserManagement"
                        Tapped="NavigationViewItem_OnTapped"
                        Visibility="{Binding ViewModel.IsAdmin, Converter={StaticResource BooleanToVisibilityConverter}, Mode=OneWay}" />
                    <NavigationViewItem
                        x:Name="LogoutNavItem"
                        Content="خروج از حساب"
                        Tapped="LogoutNavItem_OnTapped" />
                </NavigationView.MenuItems>

                <views:ShellPage x:Name="MyShell" FlowDirection="RightToLeft" />

            </NavigationView>
        </Grid>
    </Grid>
</Window>
